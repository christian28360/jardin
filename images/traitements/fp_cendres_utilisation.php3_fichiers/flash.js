
PLISTA.flash=(function(){"use strict";var logger=PLISTA.util.logger.getLogger('flash'),ppos=function(e){return PLISTA.util.DOM.getAbsolutePosition(e,PLISTA.flash.acquireAlternativePosition);},poff=PLISTA.util.DOM.scrollOffset,pdim=PLISTA.util.DOM.getDimensions,pevl=PLISTA.util.DOM.addEventListener,V={VContNom:[PLISTA.cdnpath+"videos/VideoAd.swf"],flWMode:"window",VPrevPicNom:"preview.gif",VPrevPic:[new Image()],flPopupID:"plistaVideoPETPopup",flLoop:1,LInit:false,VInit:[false],VEnType:["mouseover"],VEnDel:[300],VEnMark:[0],VTimer:[false],VbgColor:["ffffff"],VTi:["Video"],VWidth:[100],VHeight:[80],VWidthR:[200],VHeightR:[160],VFlvUrl:[""],VAdUrl:[""],VItemId:[""],VCmpId:[""],VDmnId:[""],VFBUrl:[""],VDuration:[],VTrackData:[false],VExternalEnTrackURL:[false],VScroll:0,VEng:[false],inFrame:false,VInPop:[0],VRatioSet:[false],VRatio:[1],VAnim:[""],VAnimSt:[10],VAnimElm:["flAdContainer"],START:parseInt('1',10),AFTER_SOME_SECONDS:parseInt('2',10),AFTER_SOME_SECONDS_DELAY:6000,FINISH:parseInt('3',10),pppMrkUp:{m1:'<div id="plista_intext_popup" class="plPPPbox">'+' <div class="plista_top">'+'  <div class="plista_left">&nbsp;</div>'+'  <div class="plista_right">&nbsp;</div>'+'  <div class="plista_center">'+'   <div class="topHeader">'+'    <a class="plista_close" href="javascript:PLISTA.flash.rmvPopup(PLISTA.flash.activeBox);"></a><span id="PlVT">&nbsp;</span>'+'   </div>'+'  </div>'+' </div>'+' <div class="plista_main">'+'  <div class="plista_left">'+'   <div class="plista_right">'+'    <div class="plista_center">'+'     <div class="PPPmainContentWrapper">'+'      <div id="plistaVideoPET">&nbsp;</div>'+'      <div id="plistaVideoPETMarkup">&nbsp;</div>'+'      <div style="clear:both;"></div>'+'     </div>'+'    </div>'+'   </div>'+'  </div>'+' </div>'+' <div class="plista_bottom">'+'  <div class="plista_left">&nbsp;</div>'+'  <div class="plista_right">&nbsp;</div>'+'  <div class="plista_center">'+'   <a onclick="" target="_blank" href="http://www.plista.com/">powered by plista</a>'+'  </div>'+' </div>'+'</div>',m2:'<div id="plista_intext_popup" class="plPPPbox PLbox2">'+' <div class="topHeaderMin">'+'  <a class="plista_close" href="javascript:PLISTA.flash.rmvPopup(PLISTA.flash.activeBox);"></a><span id="PlVT">&nbsp;</span>'+' </div>'+' <div class="plista_main plINbox2">'+'  <div id="plistaVideoPET">&nbsp;</div>'+'  <div id="plistaVideoPETMarkup">&nbsp;</div>'+'  <div style="clear:both;"></div>'+' </div>'+' <div style="background-color:#fff;">&nbsp;</div>'+'</div>',m3:'<div id="plista_intext_popup" class="plPPPbox PLbox2">'+' <div id="plistaVideoPET">&nbsp;</div>'+'</div>'}},isTouchDisplayDevice=function(){var tc,mobDeviceTest,k,i;try{document.createEvent("TouchEvent");tc=1;}catch(e){tc=0;}
mobDeviceTest=[('ontouchstart'in window?1:0),tc,('createTouch'in document?1:0),(/Chrome/.test(navigator.userAgent))?0:(typeof TouchEvent!="undefined"?1:0),(typeof Touch=="object"?1:0),('ontouchend'in document?1:0)];return(/1/.test(mobDeviceTest));},plistaVideoContainer=function(Id){var path=V.VFlvUrl[Id].substr(0,V.VFlvUrl[Id].lastIndexOf("/")+1);V.VPrevPic[Id]=new Image();if(V.VCmpId[Id]===1696){path=V.VFlvUrl[Id].substring(V.VFlvUrl[Id].lastIndexOf("/")+1);V.VPrevPic[Id].src="http://video.plista.com/"+V.VDmnId[Id]+"/"+path.replace(".flv","/")+V.VPrevPicNom;}else if(V.VTrackData[Id].play){path=V.VFlvUrl[Id].substring(V.VFlvUrl[Id].lastIndexOf("/")+1);V.VPrevPic[Id].src="http://video.plista.com/goviral/"+path.replace(".flv","/")+V.VPrevPicNom;}else{V.VPrevPic[Id].src=path+V.VPrevPicNom;}
if(V.VEng[Id]===true){if(V.VInPop[Id]!==0){V.VbgColor[Id]="ffffff";V.VAnimElm[Id]="plistaVideoPET";return'<img class="VideoPreviewIMG"'+(V.VEnType[Id]!=='click'?' onmouseout="PLISTA.flash.resetTimer('+Id+')"':'')+' id="PLISTAengageV'+Id+'" width="'+V.VWidth[Id]+'" src="'+V.VPrevPic[Id].src+'" on'+V.VEnType[Id]+'="PLISTA.flash.engageTimer('+Id+', function () {PLISTA.flash.startPopup('+Id+');}, (\''+V.VEnType[Id]+'\' === \'click\' ? 0 : '+V.VEnDel[Id]+'))" />';}else{return'<img class="VideoPreviewIMG"'+(V.VEnType[Id]!=='click'?' onmouseout="PLISTA.flash.resetTimer('+Id+')"':'')+' id="PLISTAengageV'+Id+'" width="'+V.VWidth[Id]+'" src="'+V.VPrevPic[Id].src+'" on'+V.VEnType[Id]+'="PLISTA.flash.engageTimer('+Id+', function () {PLISTA.flash.replacePreview('+Id+');}, (\''+V.VEnType[Id]+'\' === \'click\' ? 0 : '+V.VEnDel[Id]+'))" />';}}else{return PLISTA.flash.setUpFlash(Id);}},isEngaged=function(Id){var e=document.getElementById(V.VAnimElm[Id]);return document.getElementById(V.flPopupID+Id)||(e&&parseInt(e.style.width,10)>V.VWidth[Id]);},reposition=function(){var elms=PLISTA.util.DOM.getElementsByClassName('PETaction'),id,st,pos,i;for(i=0;i<elms.length;i=i+1){id=elms[i].id.replace("PETaction","");st=elms[i].parentNode.style;pos=ppos(document.getElementById('flAdContainer'+id));st.left=pos.x+"px";st.top=pos.y+V.VHeightR[id]+"px";}},commandToFlash=function(Id,name,args){var cont=PLISTA.flash.flScriptContainer(Id);if(cont){try{cont[name].apply(cont,args||[]);logger.debug('sent command '+name+' to video #'+Id);return true;}catch(e){logger.error('exception applying command '+name+' to flash container #'+Id+': '+e.message||e);}}else{logger.warn('couldnt find flash container #'+Id+', not executing command '+name);}
return false;},events={end:PLISTA.util.newEvent(V,'end')};pevl(window,"resize",reposition);pevl(document,"mouseout",function(e){e=e||window.event;var from=e.relatedTarget||e.toElement;if(!from||from.nodeName==="HTML"){var elms=PLISTA.util.DOM.getElementsByClassName('plVideoCont'),i;for(i=0;i<elms.length;i=i+1){var id=parseInt(elms[i].parentNode.id.replace("flAdContainer",""),10);if(isEngaged(id)&&!isTouchDisplayDevice()){logger.trace('mouseout on document. zoom out...');PLISTA.flash.slowZoomOut(id);}}}});events.end.subscribe(function(s,Id){PLISTA.flash.countEngagement(Id,V.FINISH);if(V.VInPop[Id]!==0){PLISTA.flash.rmvPopup(PLISTA.flash.activeBox);if(V.inFrame){PLISTA.flash.showWidget(Id);}}else{logger.trace('video ended. zoom out...');PLISTA.flash.slowZoomOut(Id);}});return{flVideo:function(item,args,ctx){var Id=ctx.position,goViralData=item.adoptions.goviralparams||false;V.VbgColor[Id]=(args[0]===""||typeof args[0]==="undefined")?V.VbgColor[0]:args[0];V.VWidth[Id]=parseInt((args[1]==="0"||typeof args[1]==="undefined")?V.VWidth[0]:args[1],10);V.VHeight[Id]=parseInt((args[2]==="0"||typeof args[2]==="undefined")?V.VHeight[0]:args[2],10);V.VWidthR[Id]=parseInt((args[3]==="0"||typeof args[3]==="undefined")?V.VWidthR[0]:args[3],10);V.VHeightR[Id]=parseInt((args[4]==="0"||typeof args[4]==="undefined")?V.VHeightR[0]:args[4],10);V.VEng[Id]=(args[5]===""||typeof args[5]==="undefined")?V.VEng[0]:true;if(args[6]===""||typeof args[6]==="undefined"){V.VInPop[Id]=V.VInPop[0];}else{if(args[7]===""||typeof args[7]==="undefined"||args[7]==="1"){V.VInPop[Id]=1;}else if(args[7]==="2"){V.VInPop[Id]=2;}else{V.VInPop[Id]="_"+args[7];}}
V.VFlvUrl[Id]=item.flv;V.VAdUrl[Id]=item.url;V.VItemId[Id]=item.itemid;V.VCmpId[Id]=item.campaignid;V.VDmnId[Id]=item.domainid;V.VFBUrl[Id]=item.fburl?("?"+item.fburl):"";V.VEnType[Id]=(isTouchDisplayDevice())?"click":item.adoptions.engagetype;V.VEnDel[Id]=item.adoptions.engagedelay;V.VEnMark[Id]=(item.status&parseInt('512',10))?1:0;V.VContNom[Id]=V.VContNom[0];if(parseInt(V.VEnMark[Id],10)){V.VContNom[Id]=PLISTA.cdnpath+"videos/VideoAd2.swf";}
if(V.VEnType[Id]==="click"){V.VContNom[Id]=PLISTA.cdnpath+"videos/VideoAd_mobile.swf";V.flWMode="opaque";}
if(V.inFrame){PLISTA.frameDim=PLISTA.util.DOM.getWindowDimensions();V.VInPop[Id]=1;}
V.VExternalEnTrackURL[Id]=item.adoptions.engagement_tracking_6s||false;V.VTrackData[Id]=goViralData;V.Args=V.Args||[];V.Args[Id]={item:item,args:args,ctx:ctx};V.VTi[Id]=V.VTi[0];V.VInit[Id]=V.VInit[0];V.VTimer[Id]=V.VTimer[0];V.VRatio[Id]=V.VRatio[0];V.VRatioSet[Id]=V.VRatioSet[0];V.VAnim[Id]=V.VAnim[0];V.VAnimElm[Id]=V.VAnimElm[0]+Id;V.VAnimSt[Id]=V.VAnimSt[0];V.VTi[Id]=item.title||item.item;if(V.LInit===false){ctx.listwidget.onRefresh.subscribe(function(){var deEngageListener=function(evt){var o=evt.target||evt.srcElement;while(o.id.indexOf("flAdData")===-1){o=o.parentNode;}
var f=o.id.replace("flAdData","");PLISTA.flash.resetTimer(parseInt(f,10));},engageListener=function(evt){var t=evt.target||evt.srcElement;if(t&&t.id.indexOf("PLISTAengageV")===-1){while(t.id.indexOf("flAnimTrigger")===-1){t=t.parentNode;}
var d=t.id.replace("flAnimTrigger","");if(V.VInPop[d]!==0){PLISTA.flash.engageTimer(d,function(){PLISTA.flash.startPopup(d);},(V.VEnType[d]==='click'?0:V.VEnDel[d]));}else{if(V.VInit[d]===false){PLISTA.flash.engageTimer(d,function(){PLISTA.flash.replacePreview(d);},(V.VEnType[d]==='click'?0:V.VEnDel[d]));}else{PLISTA.util.DOM.removeEventListener(document.getElementById('flAdData'+d),V.VEnType[d],engageListener);}}}},offBoxListener=function(evt){if(!evt){evt=window.event;}
if(evt){var t=evt.target||evt.srcElement,mouse,id,elm;if(t){while(t.id.indexOf("flAnimTrigger")===-1){t=t.parentNode;}
id=t.id.replace("flAnimTrigger","");elm=document.getElementById('flAdContainer'+id);}
if(parseInt(V.VEnMark[id],10)===1){mouse=PLISTA.util.mousePosition(evt);if(!((mouse.x>ppos(elm).x)&&(mouse.x<(ppos(elm).x+V.VWidthR[id]))&&(mouse.y>(ppos(elm).y))&&(mouse.y<(ppos(elm).y+V.VHeightR[id]+150)))){logger.trace('offboxlistener says: mouse left the video box. zoom out...');PLISTA.flash.slowZoomOut(id);}}}},key;for(key in V.VAdUrl){if(V.VAdUrl.hasOwnProperty(key)&&key>0){if(V.VEnType[key]!=='click'){pevl(document.getElementById('flAdData'+key),"mouseout",deEngageListener);pevl(document.getElementById('flAdData'+key),V.VEnType[key],engageListener);pevl(document.getElementById('flAnimTrigger'+key),"mouseout",offBoxListener);}else{var trElm=document.getElementById('flAnimTrigger'+key);if(trElm){if(trElm.tagName.toLowerCase()==="a"){trElm.removeAttribute("href");trElm.style.cursor="pointer";pevl(trElm,V.VEnType[key],engageListener);}else{var anchs=trElm.getElementsByTagName("a"),j;if(anchs.length>0){for(j=0;j<anchs.length;j=j+1){anchs[j].removeAttribute("href");anchs[j].style.cursor="pointer";}}
pevl(document.getElementById('flAdData'+key),V.VEnType[key],engageListener);}}}}}});V.LInit=true;}
return plistaVideoContainer(ctx.position);},hideWidget:function(Id){V.Args[Id].ctx.listwidget.spec.target.style.display="none";},showWidget:function(Id){V.Args[Id].ctx.listwidget.spec.target.style.display="block";},videoInitialized:function(Ratio,Duration,Id){var h;V.VDuration[Id]=Duration;if(V.VInit[Id]===false){logger.warn('first view');if(V.VEng[Id]===false){var e=document.getElementById("flAdContainer"+Id);e.style.width=V.VWidth[Id]+"px";e.style.height=V.VHeight[Id]+"px";}
V.VInit[Id]=true;PLISTA.flash.adjustVideoAdSize(Ratio,Id);logger.trace('video initializing, zoom in...');PLISTA.flash.slowZoomIn(Id);PLISTA.flash.countEngagement(Id,V.START);setTimeout(function(){if(isEngaged(Id)){PLISTA.flash.countEngagement(Id,V.AFTER_SOME_SECONDS);logger.debug('start pollEngaged...');PLISTA.flash.pollEngaged(Id,V.AFTER_SOME_SECONDS_DELAY);}},V.AFTER_SOME_SECONDS_DELAY);if(isTouchDisplayDevice()){h=document.createElement('a');h.className='vid_close';h.id="vid_close"+Id;h.style.cursor='pointer';h.style.width='46px';h.style.height='46px';h.style.position='absolute';h.style.top='100px';h.style.left='100px';h.style.background='transparent url(http://video.plista.com/upload/demo/vid_close.png) 0 0 no-repeat';h.style.zIndex="2147483600";h.style.display="none";h.style.textDecoration="none";h.style.outline="0";h.onclick=function(){PLISTA.flash.videoMobileClose(Id);};document.body.appendChild(h);}}else{logger.warn('n-th view');if(isTouchDisplayDevice()){PLISTA.flash.videoMobileClose(Id);}}},pollEngaged:function(Id,offset){var intervalID=0,lastPoll=(new Date()).getTime()-offset,doPoll=function(){var now=(new Date()).getTime();PLISTA.remotedata('videoadplaying',{itemid:V.VItemId[Id],objectid:PLISTA.items[0]?PLISTA.items[0].objectid:null,campaignid:V.VCmpId[Id],duration:Math.round((now-lastPoll)/1000),widgetname:V.Args[Id].ctx.listwidget?V.Args[Id].ctx.listwidget.spec.widgetname:null});if(V.VExternalEnTrackURL[Id]){(new Image()).src=V.VExternalEnTrackURL[Id];}
lastPoll=now;},runPoll=function(){if(!isEngaged(Id)){logger.trace('doPoll cancel');clearInterval(intervalID);return;}
doPoll();},endPoll=function(s,eventId){if(Id===eventId){clearInterval(intervalID);doPoll();events.end.unsubscribe(endPoll);}};doPoll();intervalID=setInterval(runPoll,15000);events.end.subscribe(endPoll);},endVideo:function(Id){events.end.fire(Id);},adjustVideoAdSize:function(Ratio,Id){V.VRatio[Id]=Ratio;V.VRatioSet[Id]=true;V.VHeight[Id]=Math.floor(V.VWidth[Id]/V.VRatio[Id]);V.VHeightR[Id]=Math.floor(V.VWidthR[Id]/V.VRatio[Id]);},handleActionBox:function(Id,mode){var mB=document.createElement("div"),mC=document.createElement("div"),mD=document.getElementById("plistaVideoPETMarkup"),path=V.VFlvUrl[Id].substr(0,V.VFlvUrl[Id].lastIndexOf("/")+1);switch(mode){case 1:if(!document.getElementById("plistaVideoPETMarkup"+Id)){mB.className="PETactionWrapper";mB.id="plistaVideoPETMarkup"+Id;mC.className="PETactionWrapper";mC.id="plistaVideoPETSpace"+Id;PLISTA.util.loadCSS(".PETactionWrapper{z-Index:2147483600 !important;clear:both;width:"+V.VWidthR[Id]+"px;height:150px;margin:0 !important;padding:0 !important;} .PETaction{width:"+V.VWidthR[Id]+"px ! important;height:150px;margin:0 !important;padding:0 !important;} #plistaVideoPETMarkup"+Id+" {width:"+V.VWidthR[Id]+"px;height:150px;position:absolute;left:"+ppos(document.getElementById('flAdContainer'+Id)).x+"px;top:"+(ppos(document.getElementById('flAdContainer'+Id)).y+V.VHeightR[Id])+"px}");document.getElementsByTagName('body')[0].appendChild(mB);document.getElementById('flAdData'+Id).parentNode.appendChild(mC);mB.innerHTML='<iframe class="PETaction" id="PETaction'+Id+'" src="'+path+V.VFBUrl[Id]+'#'+encodeURIComponent(V.VAdUrl[Id])+'" border="0" frameborder="0">No iFrames enabled...</iframe>';}else{document.getElementById("plistaVideoPETMarkup"+Id).style.display="block";document.getElementById("plistaVideoPETSpace"+Id).style.display="block";}
break;case 2:PLISTA.util.loadCSS(".PETaction{width:"+(V.VWidthR[Id]-((V.VInPop[Id]===2)?10:2))+"px ! important;height:150px;margin:0 !important;padding:0 !important;} #plistaVideoPETMarkup {width:"+(V.VWidthR[Id]-((V.VInPop[Id]===2)?10:2))+"px ! important;height:150px ! important;margin:0 4px ! important;background-color:#fff; float:none ! important;}");mD.innerHTML='<iframe class="PETaction" id="PETaction'+Id+'" src="'+path+V.VFBUrl[Id]+'#'+encodeURIComponent(V.VAdUrl[Id])+'" border="0" frameborder="0">No iFrames enabled...</iframe>';mD.style.display="block";break;}},slowZoomIn:function(Id){if(V.VAnim[Id]!=="Out"){V.VAnim[Id]="In";var obj=document.getElementById(V.VAnimElm[Id]).style,actW=parseInt(obj.width,10),actH=parseInt(obj.height,10),h;if(V.VInPop[Id]===0){document.getElementById('flAdData'+Id).style.display="none";if(!isEngaged(Id)){setTimeout(function(){PLISTA.flash.scrCheck(Id);},300);}
if(actW<V.VWidthR[Id]-2){var newW=actW+Math.floor((V.VWidthR[Id]-actW)/V.VAnimSt[Id]);var newH=actH+Math.floor((V.VHeightR[Id]-actH)/V.VAnimSt[Id]);V.VAnimSt[Id]=V.VAnimSt[Id]-1;PLISTA.flash.setStageSize(newW,newH,Id);setTimeout(function(){logger.trace('recursive zoom in...');PLISTA.flash.slowZoomIn(Id);},20);}else{V.VAnim[Id]="";V.VAnimSt[Id]=V.VAnimSt[0];if(PLISTA.flash.cancelZoom){PLISTA.flash.slowZoomOut(Id);PLISTA.flash.cancelZoom=false;}
if(parseInt(V.VEnMark[Id],10)===1){if(V.VFlvUrl[Id].indexOf("/kia/")===-1){PLISTA.flash.handleActionBox(Id,1);}}
if(isTouchDisplayDevice()){h=document.getElementById('vid_close'+Id);h.style.display="block";h.style.left=ppos(document.getElementById("flAdContainer"+Id)).x+V.VWidthR[Id]-23+"px";h.style.top=ppos(document.getElementById("flAdContainer"+Id)).y-23+"px";}}}}},slowZoomOut:function(Id){if(V.inFrame){if(document.getElementById("plista_intext_popup")&&parseInt(document.getElementById("plista_intext_popup").style.width,10)>V.VWidthR[Id]-9){PLISTA.flash.rmvPopup(PLISTA.flash.activeBox);PLISTA.flash.showWidget(Id);}}
if(V.VAnim[Id]!=="In"){V.VAnim[Id]="Out";var obj=document.getElementById(V.VAnimElm[Id]).style;var actW=parseInt(obj.width,10);var actH=parseInt(obj.height,10);if(document.getElementById("plistaVideoPETMarkup"+Id)){document.getElementById("plistaVideoPETMarkup"+Id).style.display="none";document.getElementById("plistaVideoPETSpace"+Id).style.display="none";}
if(actW>V.VWidth[Id]+2){var newW=actW-Math.floor((actW-V.VWidth[Id])/V.VAnimSt[Id]);var newH=actH-Math.floor((actH-V.VHeight[Id])/V.VAnimSt[Id]);V.VAnimSt[Id]=V.VAnimSt[Id]-1;PLISTA.flash.setStageSize(newW,newH,Id);setTimeout(function(){logger.trace('recursive zoom out');PLISTA.flash.slowZoomOut(Id);},20);}else{V.VAnim[Id]="";V.VAnimSt[Id]=V.VAnimSt[0];if(V.VInPop[Id]===0){document.getElementById('flAdData'+Id).style.display="block";}
if(parseInt(V.VEnMark[Id],10)===1&&V.VInPop[Id]===0){PLISTA.flash.soundOff(Id);}}}else{PLISTA.flash.cancelZoom=true;}},setStageSize:function(w,h,Id){var elem=document.getElementById(V.VAnimElm[Id]);if(elem){elem.style.width=parseInt(w,10)+"px";elem.style.height=parseInt(h,10)+"px";}
if(V.VInPop[Id]!==0){PLISTA.flash.posPopup(Id);}},scrCheck:function(Id){var d=document,elm=d.getElementById("flAdContainer"+Id),scrH=window.innerHeight||(d.documentElement?d.documentElement.clientHeight:d.body.clientHeight),diff=(poff().y+scrH)-(ppos(elm).y+V.VHeightR[Id]+((parseInt(V.VEnMark[Id],10)===1)?150:0));if(diff<15){var a=((-1)*diff)+20;V.VScroll=5;window.scrollBy(0,parseInt((a/3),10));setTimeout(function(){PLISTA.flash.scrCheck(Id);},20);}},setUpFlash:function(Id){setTimeout(function(){var triggElm=document.getElementById("flAdData"+Id);if(V.VInPop[Id]===0){if(isTouchDisplayDevice()){pevl(triggElm,"click",function(){logger.trace(triggElm.id+' says: a mouseover is happening on me, wheee! triggering zoom in...');PLISTA.flash.slowZoomIn(Id);PLISTA.flash.soundOn(Id);});}else{pevl(triggElm,"mouseover",function(){logger.trace(triggElm.id+' says: a mouseover is happening on me, wheee! triggering zoom in...');PLISTA.flash.slowZoomIn(Id);});}}},1000);if(V.VFlvUrl[Id].indexOf("/kia/")!==-1){PLISTA.addRemoteScriptTag('http://video.plista.com/upload/kia/additionalScript.js');V.VContNom[Id]="http://video.plista.com/upload/kia/VideoAdKia.swf";}
return'<object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=10,0,0,0" width=100% height=100% class="plVideoCont" id="VideoAd'+Id+'" align="middle">'+' <param name=FlashVars value="width='+V.VWidth[Id]+'&height='+V.VHeight[Id]+'&widthR='+V.VWidthR[Id]+'&heightR='+V.VHeightR[Id]+'&videoType=stream&videoUrl='+V.VFlvUrl[Id]+'&AdId='+Id+'&AdUrl='+encodeURIComponent(V.VAdUrl[Id])+'&videoBG=0x'+V.VbgColor[Id]+'&videoLoop='+V.flLoop+'">'+' <param name="AllowScriptAccess" value="always" />'+' <param name="allowFullScreen" value="true" />'+' <param name="movie" value="'+V.VContNom[Id]+'" />'+' <param name="quality" value="high" />'+' <param name="bgcolor" value="#'+V.VbgColor[Id]+'" />'+' <param name="wmode" value="'+V.flWMode+'" />'+' <embed class="plVideoCont" FlashVars="width='+V.VWidth[Id]+'&height='+V.VHeight[Id]+'&widthR='+V.VWidthR[Id]+'&heightR='+V.VHeightR[Id]+'&videoType=stream&videoUrl='+V.VFlvUrl[Id]+'&AdId='+Id+'&AdUrl='+encodeURIComponent(V.VAdUrl[Id])+'&videoBG=0x'+V.VbgColor[Id]+'&videoLoop='+V.flLoop+'" src="'+V.VContNom[Id]+'" quality="high" wmode="'+V.flWMode+'" bgcolor="#'+V.VbgColor[Id]+'" width=100% height=100% name="VideoAd'+Id+'" align="middle" allowScriptAccess="always" allowFullScreen="true" type="application/x-shockwave-flash" pluginspage="http://www.adobe.com/go/getflashplayer_de" />'+'</object>';},aspectRatioByPreview:function(Id){var Ratio=V.VPrevPic[Id].width/V.VPrevPic[Id].height;PLISTA.flash.adjustVideoAdSize(Ratio,Id);},replacePreview:function(Id){PLISTA.flash.aspectRatioByPreview(Id);var e=document.getElementById("flAdContainer"+Id);e.style.width=V.VWidth[Id]+"px";e.style.height=V.VHeight[Id]+"px";e.innerHTML=PLISTA.flash.setUpFlash(Id);},countEngagement:function(Id,eventtype){if(!isEngaged(Id)){return;}
PLISTA.remotedata('countengagement',{itemid:V.VItemId[Id],objectid:PLISTA.items[0]?PLISTA.items[0].objectid:null,campaignid:V.VCmpId[Id],eventtype:eventtype,additionalParams:V.Args[Id].item.additionalParams,widgetname:V.Args[Id].ctx.listwidget?V.Args[Id].ctx.listwidget.spec.widgetname:null},function(){PLISTA.util.logger.getLogger('flash').trace('logged engagement for id '+Id+', type: '+eventtype);});},resetTimer:function(Id){V.VTimer[Id]=false;},engageTimer:function(Id,fn,t){if(t===0){fn();}else{V.VTimer[Id]=true;setTimeout(function(){PLISTA.flash.handleEngage(Id,fn);},t);}},handleEngage:function(Id,fn){if(V.VTimer[Id]===true){fn();}},handleRedirect:function(Id){logger.warn("redirect video (ID) to AdUrl");PLISTA.flash.soundOff(Id);},pppOn:false,activeBox:null,activeCSS:false,startPopup:function(Id){var d=document,c;c=(String(V.VInPop[Id]).indexOf("_")===-1)?"":V.VInPop[Id];if(V.VRatioSet[Id]===false){PLISTA.flash.aspectRatioByPreview(Id);}
if(PLISTA.flash.activeCSS===false){PLISTA.util.loadCSS(PLISTA.cdnpath+"/images/popup/ppp"+c+".css");if(V.inFrame){PLISTA.util.loadCSS('.PLbox2{border:none ! important; background-color: transparent ! important;} #plistaVideoPET{margin:0 ! important;}');}
PLISTA.flash.activeCSS=true;}
if(!d.getElementById(V.flPopupID+Id)){if(d.getElementById("plista_intext_popup")){PLISTA.flash.rmvPopup(PLISTA.flash.activeBox);}
var myBox=d.body.appendChild(d.createElement("div"));myBox.id=V.flPopupID+Id;PLISTA.flash.activeBox=myBox;myBox.innerHTML=(V.VInPop[Id]===2)?V.pppMrkUp.m2:V.pppMrkUp.m1;if(V.inFrame){myBox.innerHTML=V.pppMrkUp.m3;}
var Vid=d.getElementById("plistaVideoPET"),pppWidthElm=d.getElementById("plista_intext_popup").style,pppHeightElm=d.getElementById("plistaVideoPET").style;Vid.innerHTML=PLISTA.flash.setUpFlash(Id);pppWidthElm.width=(V.VWidth[Id]+(V.inFrame?0:30))+"px";pppHeightElm.height=V.VHeight[Id]+"px";PLISTA.flash.posPopup(Id,pppWidthElm,pppHeightElm);}},posPopup:function(Id,eX,eY){var d=document,ppp=d.getElementById("plista_intext_popup"),aTr=d.getElementById("flAnimTrigger"+Id),t=pdim(aTr),u=ppos(aTr),e=ppos(d.getElementById("flAdContainer"+Id)),scrW=window.innerWidth||(d.documentElement?d.documentElement.clientWidth:d.body.clientWidth),scrH=window.innerHeight||(d.documentElement?d.documentElement.clientHeight:d.body.clientHeight),scroT=(window.pageYOffset||d.body.scrollTop||(d.documentElement?d.documentElement.scrollTop:0)),dimX2=V.VWidthR[Id],dimY2=V.VHeightR[Id],plX,plY,corr=(V.inFrame)?{x:0,y:0}:{x:16,y:36};ppp.style.left=(e.x-corr.x)+"px";ppp.style.top=(e.y-corr.y)+"px";plX=((scrW<(u.x+t.x+dimX2+50))&&((u.x+50)>=dimX2))?u.x-dimX2-50:u.x+t.x+16;plY=((scrH+scroT)<(e.y+dimY2+88))?(scrH)-(dimY2+88)+scroT:e.y-36;if(parseInt(V.VEnMark[Id],10)===1){plY=plY-150;}
plX=(isNaN(plX))?u.x+450:plX;if(V.inFrame){PLISTA.widgetAspectRatio=(PLISTA.frameDim.x/PLISTA.frameDim.y);if(PLISTA.widgetAspectRatio<V.VRatio[Id]){V.VWidthR[Id]=PLISTA.frameDim.x;V.VHeightR[Id]=Math.floor(V.VWidthR[Id]/V.VRatio[Id]);plY=(PLISTA.frameDim.y-V.VHeightR[Id])/2;plX=0;}else{V.VHeightR[Id]=PLISTA.frameDim.y;V.VWidthR[Id]=Math.floor(V.VHeightR[Id]*V.VRatio[Id]);plY=0;plX=(PLISTA.frameDim.x-V.VWidthR[Id])/2;}
PLISTA.flash.hideWidget(Id);}
PLISTA.flash.popupTrans(Id,ppp,plX,plY,eX,eY);},popupTrans:function(Id,ppp,plX,plY,eX,eY){if(V.VInit[Id]===false){setTimeout(function(){PLISTA.flash.popupTrans(Id,ppp,plX,plY,eX,eY);},100);}else{var actW=parseInt(eX.width,10)-(V.inFrame?0:30),actH=parseInt(eY.height,10),actX=parseInt(ppp.style.left,10),actY=parseInt(ppp.style.top,10),newW,newH,newX,newY,d=document;if(actW<V.VWidthR[Id]-2){newW=actW+Math.floor((V.VWidthR[Id]-actW)/Math.pow(V.VAnimSt[Id],0.5));newH=actH+Math.floor((V.VHeightR[Id]-actH)/Math.pow(V.VAnimSt[Id],0.5));newX=actX+Math.floor((plX-actX)/Math.pow(V.VAnimSt[Id],0.5));newY=actY+Math.floor((plY-actY)/Math.pow(V.VAnimSt[Id],0.5));V.VAnimSt[Id]=V.VAnimSt[Id]-1;eX.width=newW+(V.inFrame?0:30)+"px";eY.height=newH+"px";ppp.style.left=newX+"px";ppp.style.top=newY+"px";setTimeout(function(){PLISTA.flash.popupTrans(Id,ppp,plX,plY,eX,eY);},30);}else{PLISTA.flash.soundOn(Id);PLISTA.flash.pppOn=true;V.VAnimSt[Id]=V.VAnimSt[0];V.VInit[Id]=false;if(!V.inFrame){d.getElementById("PlVT").innerHTML=V.VTi[Id];}
if(parseInt(V.VEnMark[Id],10)===1){if(V.VFlvUrl[Id].indexOf("/kia/")===-1){PLISTA.flash.handleActionBox(Id,2);}}}}},soundOn:function(Id){return commandToFlash(Id,'enableSound');},soundOff:function(Id){return commandToFlash(Id,'disableSound');},rmvPopup:function(b){b.parentNode.removeChild(b);PLISTA.flash.activeBox=null;PLISTA.flash.pppOn=false;},videoMobileClose:function(Id){PLISTA.flash.slowZoomOut(Id);PLISTA.flash.soundOff(Id);document.getElementById('vid_close'+Id).style.display="none";},errorHandling:function(errCode){switch(errCode){case"streamError":break;case"otherError":break;}},JSCallAS3:function(Id){return commandToFlash(Id,'JSCallAS3',[Id]);},trace:function(val){logger.warn(val);},flScriptContainer:function(movName){return(navigator.appName.indexOf("Microsoft")!==-1)?window["VideoAd"+movName]:document["VideoAd"+movName];}};}());